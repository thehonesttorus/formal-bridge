(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[990],{1565:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>b});var a=s(5155),i=s(2115),l=s(1989),r=s(7682),c=s(1075),n=s(2619),d=s.n(n),o=s(1847);let x=(0,o.A)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]);var h=s(7910),m=s(2987),p=s(2516);let u=(0,o.A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var f=s(7978),j=s(7107);let y=(0,o.A)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);var g=s(63),N=s(304),v=s(9368);function b(){let e=(0,r.useRouter)(),t=(0,l.U)(),[s,n]=(0,i.useState)(null),[o,b]=(0,i.useState)([]),[w,k]=(0,i.useState)(!0),[A,C]=(0,i.useState)(null);(0,i.useEffect)(()=>{(async()=>{let{data:{user:s}}=await t.auth.getUser();s?n(s):e.push("/login")})()},[t,e]),(0,i.useEffect)(()=>{!async function(){try{let e=await fetch("/api/certificates"),t=await e.json();t.certificates?b(t.certificates):C(t.error||"Failed to load certificates")}catch(e){C("Failed to connect to server")}finally{k(!1)}}()},[]);let I=async()=>{await t.auth.signOut(),e.push("/")},M=Math.max(0,3-o.length);return(0,a.jsxs)("main",{className:"bg-midnight min-h-screen selection:bg-teal selection:text-midnight relative",children:[(0,a.jsx)("div",{className:"fixed inset-0 z-0",children:(0,a.jsx)(v.default,{})}),(0,a.jsxs)("div",{className:"relative z-10 text-white",children:[(0,a.jsx)(g.default,{}),(0,a.jsx)("section",{className:"pt-40 pb-20 px-6",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsxs)(c.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-12",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-teal font-mono tracking-widest text-sm font-medium block",children:"DASHBOARD"}),(0,a.jsxs)("h1",{className:"text-4xl md:text-5xl font-light text-white mt-4 leading-tight",children:["Your ",(0,a.jsx)("span",{className:"font-medium",children:"Certificates"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("span",{className:"text-slate-400 text-sm font-light",children:null==s?void 0:s.email}),(0,a.jsx)("button",{onClick:I,className:"p-2 border border-slate-700 text-slate-400 hover:border-red-500 hover:text-red-400 transition-colors",title:"Sign out",children:(0,a.jsx)(x,{className:"w-5 h-5"})})]})]}),(0,a.jsx)("p",{className:"text-lg text-slate-400 font-light max-w-xl",children:"Access and re-download your Audit Certificates. Your certificate hashes are stored securely while creditor data is never retained."})]}),(0,a.jsxs)(c.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"grid md:grid-cols-2 gap-6 mb-12",children:[(0,a.jsx)(d(),{href:"/portal/airlock",className:"group border border-slate-800/50 p-8 hover:border-teal/50 transition-colors",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(h.A,{className:"w-8 h-8 text-teal mb-4"}),(0,a.jsx)("h3",{className:"text-xl font-light text-white mb-2",children:"New Audit"}),(0,a.jsx)("p",{className:"text-sm text-slate-400 font-light",children:"Upload a creditor schedule and generate a new Audit Certificate"})]}),(0,a.jsx)(m.A,{className:"w-5 h-5 text-slate-600 group-hover:text-teal transition-colors"})]})}),(0,a.jsx)(d(),{href:"/portal",className:"group border border-slate-800/50 p-8 hover:border-teal/50 transition-colors",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(p.A,{className:"w-8 h-8 text-slate-400 mb-4"}),(0,a.jsx)("h3",{className:"text-xl font-light text-white mb-2",children:"All Tools"}),(0,a.jsx)("p",{className:"text-sm text-slate-400 font-light",children:"Access the full Audit Portal with all verification tools"})]}),(0,a.jsx)(m.A,{className:"w-5 h-5 text-slate-600 group-hover:text-teal transition-colors"})]})})]}),(0,a.jsxs)(c.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:[(0,a.jsx)("h2",{className:"text-xl font-light text-white mb-6",children:"Certificate History"}),w?(0,a.jsxs)("div",{className:"border border-slate-800/50 p-12 text-center",children:[(0,a.jsx)("div",{className:"w-8 h-8 border-2 border-teal border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-slate-400 font-light",children:"Loading certificates..."})]}):A?(0,a.jsx)("div",{className:"border border-red-500/30 p-12 text-center",children:(0,a.jsx)("p",{className:"text-red-400 font-light",children:A})}):0===o.length?(0,a.jsxs)("div",{className:"border border-slate-800/50 p-12 text-center",children:[(0,a.jsx)(p.A,{className:"w-12 h-12 text-slate-700 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-light text-slate-400 mb-2",children:"No certificates yet"}),(0,a.jsx)("p",{className:"text-sm text-slate-600 font-light mb-6",children:"Your Audit Certificates will appear here after you generate them."}),(0,a.jsxs)(d(),{href:"/portal/airlock",className:"inline-flex items-center gap-2 px-6 py-3 bg-teal text-midnight font-medium hover:bg-white transition-colors",children:["Generate First Certificate",(0,a.jsx)(m.A,{className:"w-4 h-4"})]})]}):(0,a.jsx)("div",{className:"space-y-4",children:o.map(e=>{var t;return(0,a.jsx)("div",{className:"border border-slate-800/50 p-6 hover:border-slate-700 transition-colors",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("h3",{className:"text-lg font-light text-white",children:e.case_reference||"Certificate ".concat(e.verification_code)}),(0,a.jsx)("span",{className:"text-teal font-mono text-xs",children:e.verification_code})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-sm text-slate-500",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(u,{className:"w-3 h-3"}),new Date(e.created_at).toLocaleDateString("en-GB")]}),(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(f.A,{className:"w-3 h-3"}),e.is_de_minimis_applied?"Waived":(t=e.prescribed_part,new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:0,maximumFractionDigits:0}).format(t))]}),(0,a.jsxs)("span",{className:"flex items-center gap-1 font-mono",children:[(0,a.jsx)(j.A,{className:"w-3 h-3"}),e.input_file_hash.slice(0,12),"..."]})]})]}),(0,a.jsx)("div",{className:"flex items-center gap-3",children:(0,a.jsx)(d(),{href:"/verify/".concat(e.verification_code),className:"p-2 border border-slate-700 text-slate-400 hover:border-teal hover:text-teal transition-colors",title:"View Certificate",children:(0,a.jsx)(y,{className:"w-4 h-4"})})})]})},e.id)})})]}),(0,a.jsx)(c.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"mt-12 pt-8 border-t border-slate-800/50",children:(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-8 text-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl font-light text-white",children:o.length}),(0,a.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Certificates"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl font-light text-teal",children:M}),(0,a.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Free Remaining"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl font-light text-white",children:"\xa350"}),(0,a.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Per Certificate"})]})]})})]})}),(0,a.jsx)(N.A,{})]})]})}},1989:(e,t,s)=>{"use strict";s.d(t,{U:()=>i});var a=s(5417);function i(){let e="https://ovgreczzkybegjxcazqv.supabase.co",t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im92Z3JlY3p6a3liZWdqeGNhenF2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU0ODI3NDMsImV4cCI6MjA4MTA1ODc0M30.uu9m-LZhXdIfOtPJmG21bVQQzLKFjL5V3EfbBZ4EnRI";return e&&t?(0,a.createBrowserClient)(e,t):(0,a.createBrowserClient)("https://placeholder.supabase.co","placeholder-key")}},2516:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("file-check",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]])},2987:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},7107:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]])},7682:(e,t,s)=>{"use strict";var a=s(7260);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},7910:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},7978:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]])},8170:(e,t,s)=>{Promise.resolve().then(s.bind(s,1565))}},e=>{e.O(0,[297,258,417,745,441,255,358],()=>e(e.s=8170)),_N_E=e.O()}]);